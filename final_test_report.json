{"created": 1748441197.323696, "duration": 39.99590563774109, "exitcode": 1, "root": "/home/graham/workspace/experiments/youtube_transcripts", "environment": {}, "summary": {"passed": 27, "failed": 3, "total": 30, "collected": 30}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests", "type": "Dir"}]}, {"nodeid": "tests/cli", "outcome": "passed", "result": []}, {"nodeid": "tests/core", "outcome": "passed", "result": []}, {"nodeid": "tests/mcp", "outcome": "passed", "result": []}, {"nodeid": "tests/test_agents.py::TestAgentSystem", "outcome": "passed", "result": [{"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_manager_task_submission", "type": "Coroutine", "lineno": 37}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_search_optimizer_agent_execution", "type": "Coroutine", "lineno": 63}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_progress_tracking", "type": "Coroutine", "lineno": 91}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_message_passing", "type": "Coroutine", "lineno": 112}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_concurrent_agent_execution", "type": "Coroutine", "lineno": 145}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_error_handling", "type": "Coroutine", "lineno": 168}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_task_cancellation", "type": "Coroutine", "lineno": 187}]}, {"nodeid": "tests/test_agents.py", "outcome": "passed", "result": [{"nodeid": "tests/test_agents.py::TestAgentSystem", "type": "Class"}]}, {"nodeid": "tests/test_database.py::TestDatabaseOperations", "outcome": "passed", "result": [{"nodeid": "tests/test_database.py::TestDatabaseOperations::test_initialize_database_creates_tables", "type": "Function", "lineno": 37}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_add_transcript_with_real_data", "type": "Function", "lineno": 56}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_search_transcripts_with_special_characters", "type": "Function", "lineno": 90}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_search_ranking_with_real_data", "type": "Function", "lineno": 128}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_channel_filtering", "type": "Function", "lineno": 170}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_cleanup_old_transcripts", "type": "Function", "lineno": 193}]}, {"nodeid": "tests/test_database.py", "outcome": "passed", "result": [{"nodeid": "tests/test_database.py::TestDatabaseOperations", "type": "Class"}]}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube", "outcome": "passed", "result": [{"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_extract_video_id", "type": "Function", "lineno": 23}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_fetch_real_transcript", "type": "Function", "lineno": 37}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_get_channel_videos_real", "type": "Function", "lineno": 54}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_process_channels_with_empty_list", "type": "Function", "lineno": 78}]}, {"nodeid": "tests/test_real_youtube.py", "outcome": "passed", "result": [{"nodeid": "tests/test_real_youtube.py::TestRealYouTube", "type": "Class"}]}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening", "outcome": "passed", "result": [{"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_exact_match_no_widening", "type": "Function", "lineno": 60}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_synonym_expansion", "type": "Function", "lineno": 71}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_fuzzy_matching", "type": "Function", "lineno": 83}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_no_results_after_widening", "type": "Function", "lineno": 94}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_widening_with_channels", "type": "Function", "lineno": 104}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_semantic_expansion", "type": "Function", "lineno": 117}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_widening_explanation", "type": "Function", "lineno": 138}]}, {"nodeid": "tests/test_search_widening.py", "outcome": "passed", "result": [{"nodeid": "tests/test_search_widening.py::TestSearchWidening", "type": "Class"}]}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch", "outcome": "passed", "result": [{"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_basic_search_without_optimization", "type": "Function", "lineno": 74}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_search_with_optimization", "type": "Function", "lineno": 107}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_channel_specific_search", "type": "Function", "lineno": 124}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_query_optimizer_directly", "type": "Function", "lineno": 145}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_empty_query_handling", "type": "Function", "lineno": 169}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_multi_word_search", "type": "Function", "lineno": 183}]}, {"nodeid": "tests/test_unified_search.py", "outcome": "passed", "result": [{"nodeid": "tests/test_unified_search.py::TestUnifiedSearch", "type": "Class"}]}, {"nodeid": "tests", "outcome": "passed", "result": [{"nodeid": "tests/cli", "type": "Dir"}, {"nodeid": "tests/core", "type": "Dir"}, {"nodeid": "tests/mcp", "type": "Dir"}, {"nodeid": "tests/test_agents.py", "type": "Module"}, {"nodeid": "tests/test_database.py", "type": "Module"}, {"nodeid": "tests/test_real_youtube.py", "type": "Module"}, {"nodeid": "tests/test_search_widening.py", "type": "Module"}, {"nodeid": "tests/test_unified_search.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_manager_task_submission", "lineno": 37, "outcome": "passed", "keywords": ["test_agent_manager_task_submission", "asyncio", "pytestmark", "TestAgentSystem", "test_agents.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.007854425348341465, "outcome": "passed"}, "call": {"duration": 2.8803231110796332, "outcome": "passed"}, "teardown": {"duration": 0.00041055819019675255, "outcome": "passed"}}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_search_optimizer_agent_execution", "lineno": 63, "outcome": "passed", "keywords": ["test_search_optimizer_agent_execution", "asyncio", "pytestmark", "TestAgentSystem", "test_agents.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.007576139643788338, "outcome": "passed"}, "call": {"duration": 4.607205825857818, "outcome": "passed"}, "teardown": {"duration": 0.0006455830298364162, "outcome": "passed"}}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_progress_tracking", "lineno": 91, "outcome": "passed", "keywords": ["test_agent_progress_tracking", "asyncio", "pytestmark", "TestAgentSystem", "test_agents.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.008561429101973772, "outcome": "passed"}, "call": {"duration": 3.797353093046695, "outcome": "passed"}, "teardown": {"duration": 0.0006088921800255775, "outcome": "passed"}}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_message_passing", "lineno": 112, "outcome": "passed", "keywords": ["test_agent_message_passing", "asyncio", "pytestmark", "TestAgentSystem", "test_agents.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.00939584570005536, "outcome": "passed"}, "call": {"duration": 0.004605150781571865, "outcome": "passed"}, "teardown": {"duration": 0.00026500504463911057, "outcome": "passed"}}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_concurrent_agent_execution", "lineno": 145, "outcome": "passed", "keywords": ["test_concurrent_agent_execution", "asyncio", "pytestmark", "TestAgentSystem", "test_agents.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.006872585974633694, "outcome": "passed"}, "call": {"duration": 7.74839219590649, "outcome": "passed", "log": [{"name": "asyncio", "msg": "Task was destroyed but it is pending!\ntask: <Task pending name='Task-12' coro=<AsyncAgentManager._execute_agent_task() running at /home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/agents/agent_manager.py:142> wait_for=<Future pending cb=[Task.task_wakeup()]>>", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py", "filename": "base_events.py", "module": "base_events", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1785, "funcName": "default_exception_handler", "created": 1748441173.8876202, "msecs": 887.0, "relativeCreated": 16651.61895751953, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}]}, "teardown": {"duration": 0.0005683512426912785, "outcome": "passed"}}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_agent_error_handling", "lineno": 168, "outcome": "passed", "keywords": ["test_agent_error_handling", "asyncio", "pytestmark", "TestAgentSystem", "test_agents.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.008547560311853886, "outcome": "passed"}, "call": {"duration": 1.028492912184447, "outcome": "passed"}, "teardown": {"duration": 0.0003679967485368252, "outcome": "passed"}}, {"nodeid": "tests/test_agents.py::TestAgentSystem::test_task_cancellation", "lineno": 187, "outcome": "passed", "keywords": ["test_task_cancellation", "asyncio", "pytestmark", "TestAgentSystem", "test_agents.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.0076202708296477795, "outcome": "passed"}, "call": {"duration": 1.8443233137950301, "outcome": "passed"}, "teardown": {"duration": 0.0005224701017141342, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_initialize_database_creates_tables", "lineno": 37, "outcome": "passed", "keywords": ["test_initialize_database_creates_tables", "TestDatabaseOperations", "test_database.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.0038573159836232662, "outcome": "passed"}, "call": {"duration": 0.00030944589525461197, "outcome": "passed"}, "teardown": {"duration": 0.00010964274406433105, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_add_transcript_with_real_data", "lineno": 56, "outcome": "passed", "keywords": ["test_add_transcript_with_real_data", "TestDatabaseOperations", "test_database.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.0020260396413505077, "outcome": "passed"}, "call": {"duration": 0.002007080242037773, "outcome": "passed"}, "teardown": {"duration": 9.885197505354881e-05, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_search_transcripts_with_special_characters", "lineno": 90, "outcome": "passed", "keywords": ["test_search_transcripts_with_special_characters", "TestDatabaseOperations", "test_database.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.002025859896093607, "outcome": "passed"}, "call": {"duration": 0.004462677985429764, "outcome": "passed"}, "teardown": {"duration": 0.00010105175897479057, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_search_ranking_with_real_data", "lineno": 128, "outcome": "passed", "keywords": ["test_search_ranking_with_real_data", "TestDatabaseOperations", "test_database.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.0019944687373936176, "outcome": "passed"}, "call": {"duration": 0.003376737702637911, "outcome": "passed"}, "teardown": {"duration": 0.0001012817956507206, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_channel_filtering", "lineno": 170, "outcome": "passed", "keywords": ["test_channel_filtering", "TestDatabaseOperations", "test_database.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.0020388001576066017, "outcome": "passed"}, "call": {"duration": 0.004731083754450083, "outcome": "passed"}, "teardown": {"duration": 9.948201477527618e-05, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::TestDatabaseOperations::test_cleanup_old_transcripts", "lineno": 193, "outcome": "passed", "keywords": ["test_cleanup_old_transcripts", "TestDatabaseOperations", "test_database.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.0019586579874157906, "outcome": "passed"}, "call": {"duration": 0.004697202239185572, "outcome": "passed"}, "teardown": {"duration": 9.960215538740158e-05, "outcome": "passed"}}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_extract_video_id", "lineno": 23, "outcome": "passed", "keywords": ["test_extract_video_id", "TestRealYouTube", "test_real_youtube.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 5.725072696805e-05, "outcome": "passed"}, "call": {"duration": 0.0002928762696683407, "outcome": "passed"}, "teardown": {"duration": 4.1490886360406876e-05, "outcome": "passed"}}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_fetch_real_transcript", "lineno": 37, "outcome": "passed", "keywords": ["test_fetch_real_transcript", "slow", "pytestmark", "TestRealYouTube", "test_real_youtube.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 5.2461400628089905e-05, "outcome": "passed"}, "call": {"duration": 0.8609109246172011, "outcome": "passed", "log": [{"name": "asyncio", "msg": "Task was destroyed but it is pending!\ntask: <Task cancelling name='Task-36' coro=<AsyncAgentManager._execute_agent_task() done, defined at /home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/agents/agent_manager.py:107> wait_for=<Future pending cb=[Task.task_wakeup()]>>", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py", "filename": "base_events.py", "module": "base_events", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1785, "funcName": "default_exception_handler", "created": 1748441184.538273, "msecs": 538.0, "relativeCreated": 27302.271842956543, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}]}, "teardown": {"duration": 6.773089990019798e-05, "outcome": "passed"}}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_get_channel_videos_real", "lineno": 54, "outcome": "passed", "keywords": ["test_get_channel_videos_real", "slow", "pytestmark", "TestRealYouTube", "test_real_youtube.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 6.952183321118355e-05, "outcome": "passed"}, "call": {"duration": 9.116301306057721, "outcome": "passed"}, "teardown": {"duration": 7.088109850883484e-05, "outcome": "passed"}}, {"nodeid": "tests/test_real_youtube.py::TestRealYouTube::test_process_channels_with_empty_list", "lineno": 78, "outcome": "passed", "keywords": ["test_process_channels_with_empty_list", "TestRealYouTube", "test_real_youtube.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 7.337192073464394e-05, "outcome": "passed"}, "call": {"duration": 6.887083873152733e-05, "outcome": "passed"}, "teardown": {"duration": 4.395097494125366e-05, "outcome": "passed"}}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_exact_match_no_widening", "lineno": 60, "outcome": "passed", "keywords": ["test_exact_match_no_widening", "TestSearchWidening", "test_search_widening.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.00669223302975297, "outcome": "passed"}, "call": {"duration": 0.000508469995111227, "outcome": "passed"}, "teardown": {"duration": 0.00010402221232652664, "outcome": "passed"}}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_synonym_expansion", "lineno": 71, "outcome": "passed", "keywords": ["test_synonym_expansion", "TestSearchWidening", "test_search_widening.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.006098300218582153, "outcome": "passed"}, "call": {"duration": 0.0008808281272649765, "outcome": "passed"}, "teardown": {"duration": 0.00010135211050510406, "outcome": "passed"}}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_fuzzy_matching", "lineno": 83, "outcome": "passed", "keywords": ["test_fuzzy_matching", "TestSearchWidening", "test_search_widening.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.005757733713835478, "outcome": "passed"}, "call": {"duration": 0.00046913884580135345, "outcome": "passed"}, "teardown": {"duration": 9.8411925137043e-05, "outcome": "passed"}}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_no_results_after_widening", "lineno": 94, "outcome": "failed", "keywords": ["test_no_results_after_widening", "TestSearchWidening", "test_search_widening.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.005820204969495535, "outcome": "passed"}, "call": {"duration": 0.000993689987808466, "outcome": "failed", "crash": {"path": "/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/core/database.py", "lineno": 105, "message": "sqlite3.OperationalError: fts5: syntax error near \"OR\""}, "traceback": [{"path": "tests/test_search_widening.py", "lineno": 99, "message": "in test_no_results_after_widening"}, {"path": "src/youtube_transcripts/search_widener.py", "lineno": 79, "message": "in search_with_widening"}, {"path": "src/youtube_transcripts/search_widener.py", "lineno": 111, "message": "in _execute_search"}, {"path": "src/youtube_transcripts/core/database.py", "lineno": 105, "message": "in search_transcripts"}], "longrepr": "tests/test_search_widening.py:99: in test_no_results_after_widening\n    result = widener.search_with_widening(\"quantum computing blockchain\")\nsrc/youtube_transcripts/search_widener.py:79: in search_with_widening\n    results = self._execute_search(current_query, channel_names)\nsrc/youtube_transcripts/search_widener.py:111: in _execute_search\n    return search_transcripts(\nsrc/youtube_transcripts/core/database.py:105: in search_transcripts\n    cursor.execute(base_query, [match_query, limit])\nE   sqlite3.OperationalError: fts5: syntax error near \"OR\""}, "teardown": {"duration": 0.00016116304323077202, "outcome": "passed"}}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_widening_with_channels", "lineno": 104, "outcome": "passed", "keywords": ["test_widening_with_channels", "TestSearchWidening", "test_search_widening.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.006675022188574076, "outcome": "passed"}, "call": {"duration": 0.0009077778086066246, "outcome": "passed"}, "teardown": {"duration": 0.00010288180783390999, "outcome": "passed"}}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_semantic_expansion", "lineno": 117, "outcome": "failed", "keywords": ["test_semantic_expansion", "TestSearchWidening", "test_search_widening.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.005912926979362965, "outcome": "passed"}, "call": {"duration": 0.0019240877591073513, "outcome": "failed", "crash": {"path": "/home/graham/workspace/experiments/youtube_transcripts/tests/test_search_widening.py", "lineno": 135, "message": "AssertionError: assert 0 > 0\n +  where 0 = SearchWidenerResult(original_query='nonexistent tutorial xyz', final_query='nonexistent tutorial xyz', widening_technique='exact match', widening_level=0, results=[{'video_id': 'ml_tutorial_001', 'title': 'Machine Learning Tutorial', 'channel_name': 'MLChannel', 'publish_date': '2025-05-18', 'transcript': 'Introduction to machine learning concepts and algorithms.', 'summary': 'ML basics', 'enhanced_transcript': '', 'rank': -1.38984406237505e-06}, {'video_id': 'tutorial_001', 'title': 'Complete Guide to ML', 'channel_name': 'TutorialChannel', 'publish_date': '2025-05-17', 'transcript': 'This guide covers machine learning from basics to advanced.', 'summary': '', 'enhanced_transcript': '', 'rank': -1.0157802454704852e-06}, {'video_id': 'volcano_engine_001', 'title': 'Volcano Engine Tutorial', 'channel_name': 'TechChannel', 'publish_date': '2025-05-20', 'transcript': 'Learn about Volcano Engine and its reinforcement learning capabilities.', 'summary': 'Volcano Engine overview', 'enhanced_transcript': '', 'rank': -9.55470038482683e-07}], explanation='Found 3 results with exact query.').widening_level"}, "traceback": [{"path": "tests/test_search_widening.py", "lineno": 135, "message": "in test_semantic_expansion"}], "longrepr": "tests/test_search_widening.py:135: in test_semantic_expansion\n    assert result.widening_level > 0\nE   AssertionError: assert 0 > 0\nE    +  where 0 = SearchWidenerResult(original_query='nonexistent tutorial xyz', final_query='nonexistent tutorial xyz', widening_technique='exact match', widening_level=0, results=[{'video_id': 'ml_tutorial_001', 'title': 'Machine Learning Tutorial', 'channel_name': 'MLChannel', 'publish_date': '2025-05-18', 'transcript': 'Introduction to machine learning concepts and algorithms.', 'summary': 'ML basics', 'enhanced_transcript': '', 'rank': -1.38984406237505e-06}, {'video_id': 'tutorial_001', 'title': 'Complete Guide to ML', 'channel_name': 'TutorialChannel', 'publish_date': '2025-05-17', 'transcript': 'This guide covers machine learning from basics to advanced.', 'summary': '', 'enhanced_transcript': '', 'rank': -1.0157802454704852e-06}, {'video_id': 'volcano_engine_001', 'title': 'Volcano Engine Tutorial', 'channel_name': 'TechChannel', 'publish_date': '2025-05-20', 'transcript': 'Learn about Volcano Engine and its reinforcement learning capabilities.', 'summary': 'Volcano Engine overview', 'enhanced_transcript': '', 'rank': -9.55470038482683e-07}], explanation='Found 3 results with exact query.').widening_level"}, "teardown": {"duration": 0.00010556168854236603, "outcome": "passed"}}, {"nodeid": "tests/test_search_widening.py::TestSearchWidening::test_widening_explanation", "lineno": 138, "outcome": "passed", "keywords": ["test_widening_explanation", "TestSearchWidening", "test_search_widening.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.005824685096740723, "outcome": "passed"}, "call": {"duration": 0.0008736969903111458, "outcome": "passed"}, "teardown": {"duration": 0.00010209158062934875, "outcome": "passed"}}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_basic_search_without_optimization", "lineno": 74, "outcome": "passed", "keywords": ["test_basic_search_without_optimization", "TestUnifiedSearch", "test_unified_search.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.007032609079033136, "outcome": "passed"}, "call": {"duration": 0.02191989403218031, "outcome": "passed", "log": [{"name": "youtube_transcripts.unified_search", "msg": "Could not load LoRA adapter: No module named 'unsloth'", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/unified_search.py", "filename": "unified_search.py", "module": "unified_search", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 107, "funcName": "_load_lora_adapter", "created": 1748441194.7124615, "msecs": 712.0, "relativeCreated": 37476.460218429565, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}]}, "teardown": {"duration": 0.0001268531195819378, "outcome": "passed"}}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_search_with_optimization", "lineno": 107, "outcome": "passed", "keywords": ["test_search_with_optimization", "TestUnifiedSearch", "test_unified_search.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.007185401860624552, "outcome": "passed"}, "call": {"duration": 1.7396574281156063, "outcome": "passed", "log": [{"name": "youtube_transcripts.unified_search", "msg": "Could not load LoRA adapter: No module named 'unsloth'", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/unified_search.py", "filename": "unified_search.py", "module": "unified_search", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 107, "funcName": "_load_lora_adapter", "created": 1748441194.7416568, "msecs": 741.0, "relativeCreated": 37505.65552711487, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}]}, "teardown": {"duration": 0.00019158422946929932, "outcome": "passed"}}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_channel_specific_search", "lineno": 124, "outcome": "passed", "keywords": ["test_channel_specific_search", "TestUnifiedSearch", "test_unified_search.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.00796952797099948, "outcome": "passed"}, "call": {"duration": 0.02038547396659851, "outcome": "passed", "log": [{"name": "youtube_transcripts.unified_search", "msg": "Could not load LoRA adapter: No module named 'unsloth'", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/unified_search.py", "filename": "unified_search.py", "module": "unified_search", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 107, "funcName": "_load_lora_adapter", "created": 1748441196.4899383, "msecs": 489.0, "relativeCreated": 39253.937005996704, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}]}, "teardown": {"duration": 0.00013458309695124626, "outcome": "passed"}}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_query_optimizer_directly", "lineno": 145, "outcome": "failed", "keywords": ["test_query_optimizer_directly", "TestUnifiedSearch", "test_unified_search.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 5.816109478473663e-05, "outcome": "passed"}, "call": {"duration": 0.7704111416824162, "outcome": "failed", "crash": {"path": "/home/graham/workspace/experiments/youtube_transcripts/tests/test_unified_search.py", "lineno": 165, "message": "assert 'Think: The user query is a simple keyword \"VERL\". However, without more context it\\'s unclear what kind of information they are looking for. Terms like this could refer to names (e.g., artist or band names), specific phrases, or even typos. To optimize the search and increase relevance, I will add common prefixes or suffixes that might be used alongside \"VERL\" in a query.\\n\\nAnswer: VERL transcript, VERL lyrics, VERL song, verl' == 'VERL'\n  \n  - VERL\n  + Think: The user query is a simple keyword \"VERL\". However, without more context it's unclear what kind of information they are looking for. Terms like this could refer to names (e.g., artist or band names), specific phrases, or even typos. To optimize the search and increase relevance, I will add common prefixes or suffixes that might be used alongside \"VERL\" in a query.\n  + \n  + Answer: VERL transcript, VERL lyrics, VERL song, verl"}, "traceback": [{"path": "tests/test_unified_search.py", "lineno": 165, "message": "in test_query_optimizer_directly"}], "log": [{"name": "youtube_transcripts.unified_search", "msg": "Could not load LoRA adapter: No module named 'unsloth'", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/unified_search.py", "filename": "unified_search.py", "module": "unified_search", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 107, "funcName": "_load_lora_adapter", "created": 1748441196.510565, "msecs": 510.0, "relativeCreated": 39274.563789367676, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}], "longrepr": "tests/test_unified_search.py:165: in test_query_optimizer_directly\n    assert result[\"original\"] == query\nE   assert 'Think: The user query is a simple keyword \"VERL\". However, without more context it\\'s unclear what kind of information they are looking for. Terms like this could refer to names (e.g., artist or band names), specific phrases, or even typos. To optimize the search and increase relevance, I will add common prefixes or suffixes that might be used alongside \"VERL\" in a query.\\n\\nAnswer: VERL transcript, VERL lyrics, VERL song, verl' == 'VERL'\nE     \nE     - VERL\nE     + Think: The user query is a simple keyword \"VERL\". However, without more context it's unclear what kind of information they are looking for. Terms like this could refer to names (e.g., artist or band names), specific phrases, or even typos. To optimize the search and increase relevance, I will add common prefixes or suffixes that might be used alongside \"VERL\" in a query.\nE     + \nE     + Answer: VERL transcript, VERL lyrics, VERL song, verl"}, "teardown": {"duration": 6.744218990206718e-05, "outcome": "passed"}}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_empty_query_handling", "lineno": 169, "outcome": "passed", "keywords": ["test_empty_query_handling", "TestUnifiedSearch", "test_unified_search.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.007897385861724615, "outcome": "passed"}, "call": {"duration": 0.02083661314100027, "outcome": "passed", "log": [{"name": "youtube_transcripts.unified_search", "msg": "Could not load LoRA adapter: No module named 'unsloth'", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/unified_search.py", "filename": "unified_search.py", "module": "unified_search", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 107, "funcName": "_load_lora_adapter", "created": 1748441197.2926078, "msecs": 292.0, "relativeCreated": 40056.60653114319, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}]}, "teardown": {"duration": 0.00012074317783117294, "outcome": "passed"}}, {"nodeid": "tests/test_unified_search.py::TestUnifiedSearch::test_multi_word_search", "lineno": 183, "outcome": "passed", "keywords": ["test_multi_word_search", "TestUnifiedSearch", "test_unified_search.py", "tests", "youtube_transcripts", ""], "setup": {"duration": 0.007518809288740158, "outcome": "passed"}, "call": {"duration": 0.021229160018265247, "outcome": "passed", "log": [{"name": "youtube_transcripts.unified_search", "msg": "Could not load LoRA adapter: No module named 'unsloth'", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/unified_search.py", "filename": "unified_search.py", "module": "unified_search", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 107, "funcName": "_load_lora_adapter", "created": 1748441197.321148, "msecs": 321.0, "relativeCreated": 40085.14666557312, "thread": 128197633029952, "threadName": "MainThread", "processName": "MainProcess", "process": 3115730}]}, "teardown": {"duration": 0.00016891397535800934, "outcome": "passed"}}], "warnings": [{"message": "Exception in thread Thread-19\n\nTraceback (most recent call last):\n  File \"/home/graham/.venv/lib/python3.11/site-packages/aiosqlite/core.py\", line 107, in run\n    future.get_loop().call_soon_threadsafe(set_result, future, result)\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 807, in call_soon_threadsafe\n    self._check_closed()\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 520, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/threading.py\", line 1045, in _bootstrap_inner\n    self.run()\n  File \"/home/graham/.venv/lib/python3.11/site-packages/aiosqlite/core.py\", line 110, in run\n    future.get_loop().call_soon_threadsafe(set_exception, future, e)\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 807, in call_soon_threadsafe\n    self._check_closed()\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 520, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\n", "category": "PytestUnhandledThreadExceptionWarning", "when": "runtest", "filename": "/home/graham/.venv/lib/python3.11/site-packages/_pytest/threadexception.py", "lineno": 82}, {"message": "Exception ignored in: <coroutine object AsyncAgentManager._execute_agent_task at 0x749666be67a0>\n\nTraceback (most recent call last):\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/contextlib.py\", line 301, in helper\n    return _GeneratorContextManager(func, args, kwds)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: coroutine ignored GeneratorExit\n", "category": "PytestUnraisableExceptionWarning", "when": "runtest", "filename": "/home/graham/.venv/lib/python3.11/site-packages/_pytest/unraisableexception.py", "lineno": 85}, {"message": "Exception in thread Thread-62\n\nTraceback (most recent call last):\n  File \"/home/graham/.venv/lib/python3.11/site-packages/aiosqlite/core.py\", line 107, in run\n    future.get_loop().call_soon_threadsafe(set_result, future, result)\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 807, in call_soon_threadsafe\n    self._check_closed()\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 520, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/threading.py\", line 1045, in _bootstrap_inner\n    self.run()\n  File \"/home/graham/.venv/lib/python3.11/site-packages/aiosqlite/core.py\", line 110, in run\n    future.get_loop().call_soon_threadsafe(set_exception, future, e)\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 807, in call_soon_threadsafe\n    self._check_closed()\n  File \"/home/graham/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/lib/python3.11/asyncio/base_events.py\", line 520, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\n", "category": "PytestUnhandledThreadExceptionWarning", "when": "runtest", "filename": "/home/graham/.venv/lib/python3.11/site-packages/_pytest/threadexception.py", "lineno": 82}, {"message": "Exception ignored in: <coroutine object AsyncAgentManager._execute_agent_task at 0x749666be6e30>\n\nTraceback (most recent call last):\n  File \"/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/agents/agent_manager.py\", line 122, in _execute_agent_task\n    result = await agent.execute(task_id, config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/agents/search_optimizer_agent.py\", line 22, in execute\n    return await self._optimize_queries(task_id, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/agents/search_optimizer_agent.py\", line 68, in _optimize_queries\n    await self.send_message(\n  File \"/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/agents/base_agent.py\", line 39, in send_message\n    async with aiosqlite.connect(self.db_path) as db:\n  File \"/home/graham/.venv/lib/python3.11/site-packages/aiosqlite/core.py\", line 143, in __aenter__\n    return await self\n           ^^^^^^^^^^\n  File \"/home/graham/.venv/lib/python3.11/site-packages/aiosqlite/core.py\", line 130, in _connect\n    self._connection = await future\n                       ^^^^^^^^^^^^\nasyncio.exceptions.CancelledError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/graham/workspace/experiments/youtube_transcripts/src/youtube_transcripts/agents/agent_manager.py\", line 140, in _execute_agent_task\n    await self._update_task_status(task_id, TaskStatus.CANCELLED)\nRuntimeError: coroutine ignored GeneratorExit\n", "category": "PytestUnraisableExceptionWarning", "when": "runtest", "filename": "/home/graham/.venv/lib/python3.11/site-packages/_pytest/unraisableexception.py", "lineno": 85}]}